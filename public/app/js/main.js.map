{"version":3,"sources":["app.js","timeEntry.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function () {\n    'use strict';\n\n    angular\n        .module('jogApp', ['ui.router', 'ngResource', 'ui.bootstrap', 'satellizer', 'toastr', 'ngMessages', 'angular-loading-bar', 'ngAnimate', 'ui.mask', 'chart.js'])\n        .constant('urls', {\n            BASE_API: '/api/v1'\n        })\n        .config(['$stateProvider', '$urlRouterProvider', '$locationProvider', '$authProvider', '$httpProvider', '$provide', 'urls', config])\n        .run(['$rootScope', 'authentication', 'toastr', run]);\n\n    //.constant('USER_ROLES', {\n    //    all: '*',\n    //    admin: 'admin',\n    //    user: 'user',\n    //    guest: 'guest'\n    //})\n\n    function config($stateProvider, $urlRouterProvider, $locationProvider, $authProvider, $httpProvider, $provide, urls) {\n\n        function redirectWhenLoggedOut($q, $injector, $rootScope) {\n            return {\n                responseError: function (rejection) {\n                    // Need to use $injector.get to bring in $state or else we get a circular dependency error\n                    var $state = $injector.get('$state');\n\n                    // Instead of checking for a status code of 400 which might be used for other reasons in Laravel, we check for the specific rejection reasons to tell us if we need to redirect to the login state\n                    var rejectionReasons = ['token_not_provided', 'token_expired', 'token_absent', 'token_invalid'];\n\n                    // Loop through each rejection reason and redirect to the login state if one is encountered\n                    angular.forEach(rejectionReasons, function (value, key) {\n                        if (rejection.data.error === value) {\n                            // If we get a rejection corresponding to one of the reasons in our array, we know we need to authenticate the user so we can remove the current user from local storage\n                            localStorage.removeItem('user');\n                            // Send the user to the auth state so they can login\n                            $state.go('signin');\n\n                            $rootScope.$emit('loggedOut');\n                        }\n                    });\n\n                    return $q.reject(rejection);\n                }\n            }\n        }\n\n        //Setup for the $httpInterceptor\n        $provide.factory('redirectWhenLoggedOut', redirectWhenLoggedOut);\n        // Push the new factory onto the $http interceptor array\n        $httpProvider.interceptors.push('redirectWhenLoggedOut');\n\n        // Satellizer config: //\n        $authProvider.loginUrl = urls.BASE_API + '/authenticate';\n        $authProvider.signupUrl = urls.BASE_API + '/authenticate/signup';\n\n        // Set default\n        $urlRouterProvider.otherwise('/');\n\n        // Remove # from url\n        $locationProvider.html5Mode(true);\n\n        $stateProvider\n        // route for the home page\n            .state('/', {\n                url: '/',\n                templateUrl: 'app/pages/home.html',\n                controller: 'HomeController as home',\n                data: {\n                    requireLogin: false\n                }\n            })\n            .state('signin', {\n                url: '/signin',\n                templateUrl: 'app/pages/signin.html',\n                controller: 'AuthController as auth',\n                data: {\n                    requireLogin: false\n                }\n            })\n            .state('signup', {\n                url: '/signup',\n                templateUrl: 'app/pages/signup.html',\n                controller: 'AuthController as auth',\n                data: {\n                    requireLogin: false\n                }\n            })\n            .state('dashboard', {\n                url: '/dashboard',\n                templateUrl: 'app/pages/dashboard.html',\n                controller: 'HomeController as home',\n                data: {\n                    requireLogin: true\n                }\n            })\n            .state('access-denied', {\n                url: '/access_denied',\n                templateUrl: 'app/pages/access_denied.html',\n                data: {\n                    requireLogin: false,\n                    onlyAdmin: false\n                }\n            })\n            .state('admin', {\n                url: '/admin',\n                templateUrl: 'app/pages/admin.html',\n                controller: 'AdminController as admin',\n                data: {\n                    requireLogin: true,\n                    onlyAdmin: true\n                }\n            })\n            .state('admin_create', {\n                url: '/admin/create',\n                templateUrl: 'app/pages/admin_new.html',\n                controller: 'AdminCreateController as adminCreate',\n                data: {\n                    requireLogin: true,\n                    onlyAdmin: true\n                }\n            })\n            .state('log_list', {\n                url: '/log/list',\n                templateUrl: 'app/pages/log_list.html',\n                controller: 'TimeEntryListController as timeList',\n                data: {\n                    requireLogin: true\n                }\n            })\n            .state('log_create', {\n                url: '/log/create',\n                templateUrl: 'app/pages/log_create.html',\n                controller: 'TimeEntryCreateController as timeCreate',\n                data: {\n                    requireLogin: true\n                }\n            })\n            .state('log_edit', {\n                params: {data: {}},\n                url: '/log/edit/:id',\n                templateUrl: 'app/pages/log_edit.html',\n                controller: 'TimeEntryEditController as timeEdit',\n                data: {\n                    requireLogin: true\n                }\n            })\n            .state('log_report', {\n                url: '/log/report',\n                templateUrl: 'app/pages/log_report.html',\n                controller: 'TimeEntryReportController as timeReport',\n                data: {\n                    requireLogin: true\n                }\n            });\n\n    }\n\n    function run($rootScope, authentication, toastr) {\n        authentication.stateChange(event);\n\n        $rootScope.$on('loggedOut', function(event) {\n            toastr.error('You are not allowed to see this. Please Sign-in again');\n\n            authentication.setAuthenticated(false);\n            authentication.setCurrentUser(null);\n        });\n    }\n})();","(function () {\n    'use strict';\n\n    angular\n        .module('jogApp')\n        .factory('timeEntry', timeEntry);\n\n    timeEntry.$inject = ['$resource', 'urls'];\n\n    function timeEntry($resource, urls) {\n\n        var TimeEntry = $resource(urls.BASE_API + '/time_entry/:id', {}, {\n            update: {\n                method: 'PUT'\n            }\n        });\n\n        return {\n            get: function (id) {\n                return TimeEntry.query({id:id}).$promise;\n            },\n\n            save: function (data) {\n                return TimeEntry.save(data).$promise;\n            },\n\n            update: function (data) {\n                return TimeEntry.update({id: data.id}, data).$promise;\n            },\n\n            delete: function (id) {\n                return TimeEntry.delete({id: id}).$promise;\n            }\n        }\n    }\n})();"],"sourceRoot":"/source/"}